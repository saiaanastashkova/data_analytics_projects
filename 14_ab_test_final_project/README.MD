* _В файле ab_test.ipynb не отображаются интерактивные воронки, поэтому полный формат проекта лучше смотреть в формате ab_test.html_

**Цель проекта** — провести оценку результатов A/B-теста.

**Задачи:**
1) Оценить корректность проведения теста, в т.ч.:
- пересечение тестовой аудитории с конкурирующим тестом;
- совпадение теста и маркетинговых событий, другие проблемы временных границ теста.

2) Проанализировать результаты теста.

**Данные:** основной и вспомогательные датасеты с действиями и характеристиками пользователей.

**Техническое задание:**

- Название теста: recommender_system_test;
- Группы: А (контрольная), B (новая платёжная воронка);
- Дата запуска: 2020-12-07;
- Дата остановки набора новых пользователей: 2020-12-21;
- Дата остановки: 2021-01-04;
- Аудитория: 15% новых пользователей из региона EU;
- Назначение теста: тестирование изменений, связанных с внедрением улучшенной рекомендательной системы;
- Ожидаемое количество участников теста: 6000.
- Ожидаемый эффект: за 14 дней с момента регистрации в системе пользователи покажут улучшение каждой метрики не менее, чем на 10%: 
        - конверсии в просмотр карточек товаров — событие product_page
        - просмотры корзины — product_cart
        - покупки — purchase.

**Что изменилось после предобработки:**
- Тип данных времени заменен на datetime
- Пропуски есть только в столбце details таблицы с событиями events. В дополнительных данных вполне могут быть такие пропуски, поэтому оставим их как есть.
- Явных и неявных дубликатов не выявлено. Однако в, в наименованиях A/B-тестов в таблице с участниками participants есть конкурирующий тест - interface_eu_test.
- Датасеты объединены в один.

**Оценка корректности данных:**
1) **Тест был остановлен раньше**, последняя запись имеет дату 30 декабря 2020 г. **Даты регистрации новых пользователей являются корректными** - от 7 до 21 декабря 2020 г.

2) Во время проведения теста **были проведены две маркетинговые кампании**:

- Christmas&New Year Promo (стартовала 25 декабря 2020 г., завершилась 3 января 2021 г.)
- CIS New Year Gift Lottery. (стартовала 30 декабря 2020 г., завершилась 7 января 2021 г.)

Маркетинговые активности могли повлиять на поведение пользователей, однако они касаются всех групп теста одинаково. Будем иметь это в виду.

3) **Дублирующихся в обоих группах участников теста recommender_system_test не найдено**.

4) Есть **1602 пользователя (9.61% от общего числа), которые стали участниками обоих тестов recommender_system_test и interface_eu_test**. Тесты были проведены в одно время, поэтому получилось так, что их некоторые их участники пересекаются. Участие в двух тестах может исказить результаты, поэтому их данные из датасета удалены.

5) **2311 участников (47.23%) теста не совершили за период теста ни одного события**. Эти случаи не связаны с датами, девайсами. В контрольной группе значительно выше доля пользователей (70.62%), не совершавших события. В тестовой группе эта доля составляет всего 29.5%. В целом, при наличии таких пользователей группы становятся неоднородными. Поэтому **неактивных пользователей из датасета удалили**. 

6) **Процент участников теста из ЕС от всех новых пользователей из ЕС составяет 14.73%**, что примерно соответсвует заявленным в ТЗ 15%.

7) **До чистки участников теста было 6431 чел**. (больше ожидаемого на 7.18%). Участников из тестовой группы A (3668 чел.) было больше, чем из контрольной группы B (2763 чел.). Размеры групп различаются на 905 человек.

**После чистки участников теста стало 2582 чел**. (меньше ожидаемого на 56.97%). Участников из тестовой группы A (1962 чел.) было больше, чем из контрольной группы B (620 чел.). Размеры групп различаются на 1342 человек.

**Исследовательский анализ данных выявил следующие инсайты:**

- В целом **корректность данных сомнительна** - из-за удаления дублирующихся с конкурирующим тестом и неактивных пользователей участников теста стало меньше ожидаемого почти на 57%.
- В среднем частота событий на одного пользователя в группе A составляет 7 единиц, а в группе B 5 единиц. **Активность тестовой группы выше в 2-3 раза.**

- **У тестовой группы A набор новых пользователей сильно активизировался с 14 декабря 2020 г.**, а у контрольно группы B все осталось в прежнем темпе. До этой даты темпы регистрации новых пользователей были примерно одинаковыми. Сложно предположить с чем это связано, но это точно нехорошо будет влиять на однородность групп.

- **Поведение пользователей разных групп заметно различается во времени.** Активность группы A резко возросла с 14 декабря 2020 г., а у группы B изначально была хорошая активность. В обеих группах пик активности был 21 декабря 2020 г., потом плавно пошло на спад до конца периода. Снижение активности обеих групп  можно объяснить приближением праздничных дней. 

- **Праздничные дни** могли сильно исказить результаты, желательно было бы провести тест в более спокойное и стабильное время.

- **Маркетинговые акции** Christmas&New Year Promo и CIS New Year Gift Lottery **заметного влияния не поведение пользователей не оказали**. 

- По количеству уникальных пользователей до оплаты дошло чуть меньше людей, чем до открытия корзины, что нарушает логику воронки. **Возможно некоторые пользователи оплачивают товары пользуясь функцией "быстрой оплаты" / "мгновенной покупки"**

- **Больше всего пользователей теряется между регистрацией login и просмотром продукта product_page**. В целом **до целевого события (purchase) доходит 798 чел. (30.91% пользователей)**, а до корзины product_cart 780 человек (30.21% пользователей). 

**Проверка результатов теста:**

- Ощутимое улучшение конверсии после введения рекомендаельной системы есть только на этапе просмотра карточке товаров - product_page.
- **Ожидаемый эффект**, что за 14 дней с момента регистрации в системе пользователи покажут улучшение конверсии не менее, чем на 10%, **оправдать не удалось**. 
- В результате тестирования, статистически значимая разница конверсий в группах А и В не выявлена на втором и третьем шаге воронки (product_cart и purchase), на первом шаге (product_page) найти статистически значимую разницу удалось. Значит внедрение рекомендательной системы recommender_system_test способствует только улучшению просматриваемости карточек товаров. 

**ИТОГО:** Учитывая особенности условий проведения тестирования и недостаточно корректных данных можно сделать вывод, что **эффективность внедрения реклмендательной системы recommender_system_test доказать не удалось**.

**Рекомендации:**
- Желательно провести повторный тест в более удачное время, когда нету общегосударственных праздников и иных социально значимых событий. Во время теста могут быть приостановлены маркетинговые активности. 
- Скорретировать распределение пользователей на группы, чтобы не допустить сильный разрыв в численности, регистрации, активности.
